<%- include("partials/navbar") %>


  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: #f4f7fc;
      margin: 0;
      padding: 0;
    }

    .container {
      width: 90%;
      max-width: 1100px;
      margin: auto;
      margin-top: 20px;
      padding-top: 40px;
    }

    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 30px;
    }

    /* Form */
    .form-box {
      background: #ffffff;
      padding: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      border-radius: 10px;
      margin-bottom: 40px;
    }

    .form-box input {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 15px;
    }

    .form-box button {
      margin-top: 15px;
      background: #4b79ff;
      color: white;
      padding: 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      width: 100%;
    }

    /* Roadmap Cards */
    .roadmap-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
    }

    .card {
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    .card h3 {
      color: #4b79ff;
    }

    .step {
      background: #f1f3ff;
      padding: 10px;
      border-radius: 8px;
      margin: 10px 0;
    }

    .completed {
      background: #cfffd2;
      text-decoration: line-through;
      color: #1f7a1f;
    }

    .complete-btn {
      background: #22c55e;
      color: white;
      padding: 7px 10px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 6px;
    }
  </style>
</head>

<body>
  <div class="container">

    <h1>Your Roadmaps</h1>

    <!-- Create Roadmap -->
    <div class="form-box">
      <h2>Create New Roadmap</h2>
      <input id="goal" type="text" placeholder="Enter your goal (e.g., Web Developer)">
      <input id="skills" type="text" placeholder="Skills (comma separated)">
      <button onclick="createRoadmap()">Add Roadmap</button>
    </div>

    <!-- Saved Roadmaps -->
    <div class="roadmap-container" id="roadmaps"></div>
  </div>


<script>
  let roadmaps = JSON.parse(localStorage.getItem("roadmaps") || "[]");

  function save() {
    localStorage.setItem("roadmaps", JSON.stringify(roadmaps));
    display();
  }

  function createRoadmap() {
    let goal = document.getElementById("goal").value;
    let skills = document.getElementById("skills").value.split(",").map(s => s.trim());

    if (!goal) return alert("Enter a goal!");

    let newRoadmap = {
      id: Date.now(),
      goal,
      skills,
      steps: [
        { title: "Learn Basics", desc: "Start with fundamentals", duration: "1 week", done: false },
        { title: "Practice Exercises", desc: "Solve coding exercises", duration: "10 days", done: false },
        { title: "Build Projects", desc: "Create mini projects", duration: "2 weeks", done: false }
      ]
    };

    roadmaps.push(newRoadmap);
    save();

    document.getElementById("goal").value = "";
    document.getElementById("skills").value = "";
  }


  function markStep(roadmapId, index) {
    let roadmap = roadmaps.find(r => r.id === roadmapId);
    roadmap.steps[index].done = true;
    save();
  }


  function display() {
    let box = document.getElementById("roadmaps");
    box.innerHTML = "";

    roadmaps.forEach(roadmap => {
      let card = document.createElement("div");
      card.className = "card";

      card.innerHTML += `<h3>${roadmap.goal}</h3>`;
      card.innerHTML += `<p><strong>Skills:</strong> ${roadmap.skills.join(", ") || "None"}</p>`;
      card.innerHTML += `<h4>Steps:</h4>`;

      roadmap.steps.forEach((step, i) => {
        card.innerHTML += `
          <div class="step ${step.done ? 'completed' : ''}">
            <strong>${step.title}</strong>
            <p>${step.desc}</p>
            <p>⏳ ${step.duration}</p>

            ${!step.done ? 
              `<button class="complete-btn" onclick="markStep(${roadmap.id}, ${i})">Mark Completed</button>`
            : `<strong>✔ Completed</strong>`}
          </div>
        `;
      });

      box.appendChild(card);
    });
  }

  display();
</script>

</body>
</html>

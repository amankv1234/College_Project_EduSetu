<%- include("partials/navbar") %>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      margin: 0;
      background: #f5f7fb;
    }

    .header {
      padding: 20px;
      background: white;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 99;
    }

    .header h1 {
      margin: 0;
      color: #333;
      text-align: center;
    }

    /* Search Bar */
    .search-container {
      width: 90%;
      max-width: 900px;
      margin: 25px auto;
      display: flex;
      gap: 10px;
    }

    .search-container input, select {
      flex: 1;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 15px;
    }

    .search-container button {
      padding: 12px 20px;
      border-radius: 8px;
      border: none;
      background: #4b79ff;
      color: white;
      font-size: 15px;
      cursor: pointer;
    }

    /* Category Tabs */
    .tabs {
      width: 90%;
      max-width: 900px;
      margin: 15px auto;
      display: flex;
      gap: 10px;
      justify-content: center;
    }

    .tab {
      padding: 10px 20px;
      background: #dfe3ff;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      transition: 0.3s;
    }

    .active-tab {
      background: #4b79ff;
      color: white;
    }

    /* Cards */
    .cards-container {
      width: 90%;
      max-width: 1100px;
      margin: 25px auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .card {
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    .card h2 {
      color: #4b79ff;
      margin-top: 0;
    }

    .skills {
      margin: 10px 0;
      font-size: 14px;
    }

    .skills span {
      background: #eef1ff;
      padding: 4px 10px;
      border-radius: 6px;
      margin-right: 6px;
    }

    .btns {
      margin-top: 12px;
    }

    .btns button {
      padding: 10px 12px;
      margin-right: 10px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    .apply {
      background: #22c55e;
      color: white;
    }

    .save {
      background: #4b79ff;
      color: white;
    }

    .details {
      background: #cccccc;
    }
  </style>
</head>

<body>

  <div class="header">
    <h1>Explore Opportunities – Hackathons, Internships & Open Source</h1>
  </div>

  <!-- Search + Filters -->
  <div class="search-container">
    <input id="searchText" type="text" placeholder="Search by title, company, skills...">
    <select id="filterType">
      <option value="all">All Types</option>
      <option value="hackathon">Hackathon</option>
      <option value="internship">Internship</option>
      <option value="open-source">Open Source</option>
    </select>
    <select id="filterSkill">
      <option value="all">Skills</option>
      <option value="Web Dev">Web Dev</option>
      <option value="JavaScript">JavaScript</option>
      <option value="React">React</option>
      <option value="AI/ML">AI/ML</option>
      <option value="Blockchain">Blockchain</option>
    </select>
    <button onclick="applyFilters()">Search</button>
  </div>

  <!-- Category Tabs -->
  <div class="tabs">
    <div class="tab active-tab" onclick="showTab('all')">All</div>
    <div class="tab" onclick="showTab('hackathon')">Hackathons</div>
    <div class="tab" onclick="showTab('internship')">Internships</div>
    <div class="tab" onclick="showTab('open-source')">Open Source</div>
  </div>

  <!-- Cards -->
  <div class="cards-container" id="cards"></div>


<script>
  // Dummy opportunity data (Later replace with API)
  let data = [
    {
      title: "Smart India Hackathon 2025",
      type: "hackathon",
      skills: ["Web Dev", "JavaScript", "AI/ML"],
      deadline: "2025-02-21",
      org: "Gov of India"
    },
    {
      title: "Google Summer Internship",
      type: "internship",
      skills: ["C++", "AI/ML", "DSA"],
      deadline: "2025-01-20",
      org: "Google"
    },
    {
      title: "MLH Global Hack Week",
      type: "hackathon",
      skills: ["React", "Backend", "AI"],
      deadline: "2025-03-11",
      org: "MLH"
    },
    {
      title: "Open Source – Mozilla",
      type: "open-source",
      skills: ["JavaScript", "React"],
      deadline: "No Deadline",
      org: "Mozilla"
    },
    {
      title: "Microsoft Engage Program",
      type: "internship",
      skills: ["Python", "AI/ML"],
      deadline: "2025-04-01",
      org: "Microsoft"
    }
  ];

  let activeType = "all";

  function showTab(type) {
    activeType = type;

    document.querySelectorAll(".tab").forEach(t => t.classList.remove("active-tab"));
    event.target.classList.add("active-tab");

    render();
  }

  function applyFilters() {
    render();
  }

  function render() {
    let container = document.getElementById("cards");
    container.innerHTML = "";

    let search = document.getElementById("searchText").value.toLowerCase();
    let skill = document.getElementById("filterSkill").value;
    let type = document.getElementById("filterType").value;

    data
      .filter(item =>
        (activeType === "all" || item.type === activeType) &&
        (type === "all" || item.type === type) &&
        (skill === "all" || item.skills.includes(skill)) &&
        (item.title.toLowerCase().includes(search) ||
         item.org.toLowerCase().includes(search))
      )
      .forEach(op => {
        let card = document.createElement("div");
        card.className = "card";

        card.innerHTML = `
          <h2>${op.title}</h2>
          <p><b>Organization:</b> ${op.org}</p>
          <p><b>Type:</b> ${op.type.toUpperCase()}</p>
          <p><b>Deadline:</b> ${op.deadline}</p>

          <div class="skills">
            <b>Skills:</b><br>
            ${op.skills.map(s => `<span>${s}</span>`).join("")}
          </div>

          <div class="btns">
            <button class="apply">Apply</button>
            <button class="save">Save</button>
            <button class="details">Details</button>
          </div>
        `;

        container.appendChild(card);
      });
  }

  render();
</script>

</body>
</html>
